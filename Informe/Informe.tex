\documentclass[10pt]{article}
% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[spanish]{babel}

% Set page size and margins
% Replace `letterpaper' with`a4paper' for UK/EU standard size
\usepackage[a4paper,top=1.9cm,bottom=3.67cm,left=1.9cm,right=1.32cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}

% Set document Font
\usepackage{fontspec}
\setmainfont{Times New Roman}

% Para las ecuaciones: https://latex.codecogs.com/eqneditor/editor.php?lang=es-es

\title{Proyecto Global Integrador AyME:\\
Control de Accionamiento de CA con Motor Sincrónico de Imanes Permanentes}

\author{Guarise Renzo, Trubiano Lucas\\
Profesor: Ing. Gabriel L. Julián\\
\\
Universidad Nacional de Cuyo - Facultad de Ingeniería\\
Automática y Máquinas Eléctricas\\
Ingeniería Mecatrónica}

\begin{document}
\maketitle

\begin{center} % Centrar texto
    {\Large \textbf{Resumen}}
\end{center}

Resumen sobre el proyecto.

Al final del resumen empezamos con el resto del informe

\newpage

% \tableofcontents % Creamos el indice

\section{Introducción}

\section{Desarrollo}
\subsection{Modelado, Análisis y Simulación dinámica del SISTEMA FÍSICO a “Lazo Abierto” (Sin Controlador externo de Movimiento)}
\subsubsection{Modelo matemático equivalente (1 GDL) del subsistema mecánico completo}
En el sistema físico real hay varios subsistemas mecánicos los cuales detallaremos a continuación para luego hacer una combinación de todos estos en un único subsistema mecánico equivalente.

\begin{itemize}
	\item \textbf{Carga mecánica}\vspace{0.3cm}\\
	En lo que refiere al subsistema mecánico del brazo del robot y la carga mecánica aplicada al mismo, se puede modelar mediante la siguiente ecuación:
	\begin{equation}
		\label{eqn:cargaMecanica}
		J_{l}\cdot \dot{\omega }_{l}\left ( t \right )=T_{q}\left ( t \right )-b_{l}\cdot \omega_{l}\left ( t \right )-T_{l}\left ( t \right ) \ \ ;\ \ \omega_{l}\left ( t \right )\equiv \dot{q}_{l}\left ( t \right )= \dot{q}_1\left ( t \right )
	\end{equation}
	Donde $q_{1}(t)$ es la posición articular del hombro del robot, $J_{l}$ es el momento de inercia de todos los eslabones del robot referidos al hombro, $b_{l}$ es el coeficiente de amortiguamiento viscoso, $T_{l}$ es el torque de carga o perturbación y $T_{q}$ es el par mecánico entregado a la salida de la caja reductora de engranajes.
	La inercia y el amortiguamiento son dos de los parámetros que varían según la posición de las articulaciones del robot, es decir, $J_{l}(q_{1}(t),q_{2}(t),...,q_{n}(t))$ y una función similar para $b_{l}$.
	En este caso, se considera un valor nominal para estos parámetros, y sus posibles variaciones máximas, pero sin estar relacionado directamente con las posiciones articulares del robot.
	
	\item \textbf{Subsistema de la transmisión:}\vspace{0.3cm}\\
	El tren de transmisión del robot está formado por una caja reductora, reversible, de engranajes planetarios. Se asume acoplamiento \textbf{rígido}, sin elasticidad torsional y sin backlash (juego). Al considerar una transmisión ideal y sin pérdida de potencia, las ecuaciones que la modelan son:
	\begin{equation}
		\label{eqn:relacionTransmision}
		\omega_{l}\left ( t \right )=\frac{1}{r}\cdot w_{m}\left ( t \right )
	\end{equation}
	\begin{equation}
		\label{eqn:torqueTransmision}
		T_{q}\left ( t \right )=r\cdot T_{d}\left ( t \right )
	\end{equation}
	Donde $\omega_{m}(t)$ es la velocidad angular del eje del rotor del motor, $T_{d}(t)$ es el torque de la máquina eléctrica (equivalente a una carga colocada en el eje del rotor) y $r$ es la relación de transmisión del reductor planetario.
	
	\item \textbf{Subsistema mecánico del motor:}\vspace{0.3cm}\\
	Por último tenemos el subsistema mecánico que modela el torque de salida de la máquina eléctrica. Las ecuaciones que modelan el sistema son las siguientes:
	\begin{equation}
		\label{eqn:sistMecanicoMotor}
		J_{m}\cdot \dot{\omega }_{m}\left ( t \right )=T_{m}\left ( t \right )-b_{m}\cdot \omega_{m}\left ( t \right )-T_{d}\left ( t \right ) \ \ ;\ \ \omega_{m}\left ( t \right )\equiv \dot{q}_{m}\left ( t \right )
	\end{equation}
	Donde $J_{m}$ es la inercia del rotor respecto a su propio eje, $b_{m}$ es la viscosidad del rotor y $T_{m}(t)$ es el torque electromecánico de la máquina eléctrica.

	\item \textbf{Modelo equivalente mecánico (1 GDL):}\vspace{0.3cm}\\
	A continuación vamos a hacer unas simplificaciones sobre las ecuaciones de los subsistemas mecánicos, con el fin de reducir la complejidad del problema y teniendo en cuenta como hipotesis, que la transmisión es totalmente rígida y sin backlash (juego).
	Esto significa, que todo el movimiento a la entrada del reductor, se transmite a la salida con una relación lineal. Con el torque, sucede lo mismo, hay una transmisión lineal y sin pérdidas de potencia.

	Bajo estas hipotesis, despejamos $T_{d}$ de la ecuación \ref{eqn:torqueTransmision} y lo reemplazamos en la ecuación \ref{eqn:sistMecanicoMotor}:
	\begin{equation}
		\label{eqn:paso1sistMecanico}
		J_{m}\cdot \dot{\omega }_{m}\left ( t \right )=T_{m}\left ( t \right )-b_{m}\cdot \omega_{m}\left ( t \right )-\frac{T_{q}\left ( t \right )}{r}
	\end{equation}
	Luego, despejamos $T_{q}$ de la ecuación \ref{eqn:cargaMecanica} y lo reemplazamos en \ref{eqn:paso1sistMecanico}:
	\begin{equation}
		\label{eqn:paso2sistMecanico}
		J_{m}\cdot \dot{\omega }_{m}\left ( t \right )=T_{m}\left ( t \right )-b_{m}\cdot \omega_{m}\left ( t \right )-\frac{\left ( J_{l}\cdot \dot{\omega_{l}}+b_{l}\cdot \omega_{l}+T_{l} \right )}{r}
	\end{equation}
	Teniendo en cuenta la relación de la ecuación \ref{eqn:relacionTransmision}, la reemplazamos en \ref{eqn:paso2sistMecanico} y reacomodamos la expresión:
	\begin{equation}
		\label{eqn:paso3sistMecanico}
		\left ( J_{m}+\frac{J_{l}}{r^{2}} \right )\cdot \dot{\omega }_{m}\left ( t \right )=T_{m}\left ( t \right )-\left ( b_{m}+\frac{b_{l}}{r^{2}} \right )\cdot \omega_{m}\left ( t \right )-\frac{T_{l}}{r}
	\end{equation}
	Donde establecemos las siguientes equivalencias:
	\begin{equation}
		J_{m}+\frac{J_{l}}{r^{2}}=J_{eq}
	\end{equation}
	\begin{equation}
		b_{m}+\frac{b_{l}}{r^{2}}=b_{eq}
	\end{equation}
	\begin{equation}
		\frac{T_{l}}{r}=T_{eq}
	\end{equation}
	Quedando así la ecuación \ref{eqn:paso3sistMecanico} como:
	\begin{equation}
		J_{eq}\cdot \dot{\omega }_{m}\left ( t \right )=T_{m}\left ( t \right )-b_{eq}\cdot \omega_{m}\left ( t \right )-T_{eq} \ \ ;\ \ \omega_{m} \equiv \dot{\theta_{m}}
	\end{equation}
	Dicha ecuación se puede representar en bloques de \textbf{Simulink}, como se ve en la siguiente figura:
	\begin{figure}[htb]
		\centering
		\includegraphics{2_1_1_ModeloMecanicoEquivalente.png}
		\caption{Fotografía de un paraguas}
	\end{figure}

\end{itemize}

\subsubsection{Modelo dinámico del sistema físico completo}

\begin{enumerate}
    \renewcommand{\theenumi}{\alph{enumi}} %Letras minúsculas
    \item \textbf{Modelo global no lineal (NL)}
    
    TEXTO

    \item \textbf{Linealización Jacobiana}
    \vspace{0.3cm} 
    \\Primero obtendremos el modelo \textbf{global linealizado con parámetros variables (LPV)}, para $ i_{ds}^{r}\left( t \right ) \neq 0 $ (caso gral.). 
    Un sistema \textbf{no lineal} puede ser representado por:
    \begin{equation}
        \dot{x}\left ( t \right )= f\left ( x\left ( t \right ),u\left ( t \right ) \right ) \ \ \ ,\ \ \ x\left ( t_{0} \right )=x_{0}
    \end{equation}
    \begin{equation}
        y\left ( t \right )=h\left ( x\left ( t \right ) \right )
    \end{equation}
    donde f es una función vectorial de n × 1 elementos que esta en función de un vector x conformado por las variables de estado.
    n representa el orden del sistema y la solución de x(t) representa una curva en el espacio de estado, denominada como trayectoria de estado.
    Asumiendo que toda variable estará definida como,
    \begin{equation}
        z\left ( t \right )\equiv Z_{0} + \Delta z\left ( t \right )
    \end{equation}
    donde Zo es una magnitud cuasi-estacionaria de variación muy lenta con el tiempo y ∆z(t) una magnitud pequeña de variación rápida en el tiempo.
    El sistema queda expresado:
    \begin{equation}
        \begin{cases}
            \dot{x}\left ( t \right )\equiv
            \frac{\mathrm{d} X_{o}\left ( t \right )}{\mathrm{d} t}+
            \frac{\mathrm{d} \Delta x\left ( t \right )}{\mathrm{d} t}
            =
            f\left ( X_{o}\left ( t \right )+\Delta x\left ( t \right ),U_{o}\left ( t \right )+\Delta u\left ( t \right ) \right )
            \\
            X_{o}\left ( 0 \right )=x_{0}\ \ ;\ \ \ \Delta x\left ( 0 \right )=0
        \end{cases}
    \end{equation}

    \item Linealización por Realimentación NL
    \begin{itemize}
    
	\item\textbf{ Modelo simplificado lineal invariante (LTI) equivalente}.
	A continuación se presenta el modelo (LTI) en espacio de estado obtenido del modelo NL completo, considerando que la corriente  		$i^{r}_{ds}$ en directo con el campo magnético principal generado por imanes permanetes es nula, la resistencia en los 			devanados del estator es constante con la temperatura y el sistema es equilibrado y simétrico, por lo que  $i^{r}_{0s}=0$.\\
	Definimos el vector de estados $X(t)$ ec.\ref{eq:2.1.2.c.1} , el vector de entradas $u(t)$ ec.\ref{eq:2.1.2.c.2} y la perturbación 	$d(t)$ ec.\ref{eq:2.1.2.c.3}:
	\begin{equation}
	X(t)=\begin{bmatrix}
	\theta_{m}(t)\\
	\omega_{m}(t) 
	\\ 
	i^{r}_{qs}
	\end{bmatrix}
	\label{eq:2.1.2.c.1}
	\end{equation}
	\begin{equation}
	u(t)=v^{r}_{qs} 
	\label{eq:2.1.2.c.2}
	\end{equation}
	\begin{equation}
	d(t)=\frac{T_{l}(t)}{r} 
	\label{eq:2.1.2.c.3}
	\end{equation}
	
	Asi el espacio de estados es el siguiente  :
	
	\begin{equation}
	\begin{cases}
	\dot{X}(t)=\begin{bmatrix}
	0 & 1 &0 \\ 
	0 & -\frac{b_{eq}}{J_{eq}} & \frac{3 P_{p} \lambda^{r'}_{m}}{2 J_{eq}} \\ 
	0  & \frac{- P_{p} \lambda^{r'}_{m}}{ L_{q}} & \frac{-R_{s}}{L_{q}}
	\end{bmatrix} X(t) + \begin{bmatrix}
	0 &0 \\ 
	0 &\frac{-1}{J_{eq}} \\ 
	 \frac{1}{L_{q}}&0 
	\end{bmatrix} \begin{bmatrix}
	u(t)\\
	d(t) 
	
	\end{bmatrix} \ ; X(t_{0})=x_{0}\\ 
	y(t)=[1 \ \ 0 \ \ 0 ] \ X(t)
	\end{cases}
	\label{eq:2.1.2.c.4}
	\end{equation}
	Es importante notar que con esta simplificaciones obtenemos un sistema algebraico completamente lineal y la matriz de 				coeficientes A es constante, además el torque electromagnético ec. \ref{} depende solamente de $i^{r}_{qs}$ y la tensión 			inducida en el eje en cuadratura q (ec. \ref{}) depende solamente de $w_{m}$.
	
	En la figura \ref{fig:diagLTI} se muestra el diagrama de bloques en forma desagregada del sistema (rosado).
	
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.5\textwidth]{DiagramabloquesLTI.png}
	\caption{\label{fig:diagLTI} Diagrama de bloques de estado del modelo simplificado lineal invariante (LTI) equivalente. Con dinámica residual (rojo) y sin dinámica residual (rosado) }
	\end{figure}
	
	\item\textbf{ Restricción o Ley de Control mínima}.
	Para lograr una $i^{r}_{ds}$ nula y asi obtener el modelo LTI desarrollado en el punto anterior debemos aplicar sobre el eje d la ley de control expresada por la ec. \ref{eq:2.1.2.d.1}.
	\begin{equation}
	v^{r}_{ds}(t)=-L_{q}*i^{r}_{qs}(t)*P_{p}*\omega_{m}(t)\ ; i^{r}_{ds}(t_{0})=0
	\label{eq:2.1.2.d.1}
	\end{equation}
	
	Esta restricción se obtiene al imponer la condición $i^{r}_{ds}\equiv 0$ en la ec.\ref{eq:}, lo que define una ecuación algebraica que representa una restricción sobre $v^{r}_{ds}(t)$. Asi $v^{r}_{ds}(t)$ deja de ser una variable manipulada. Como podemos ver se ha considerado que la condición inicial de $i^{r}_{ds}$ es nula, ya que si esta no lo fuera tendriamos una dinámica residual de la corriente $i^{r}_{ds}$ lo que provocaría que el modelo no sea lineal en los instantes iniciales, pero esto lo tocaremos en detalle más adelante. Por otro lado para implementar esta ley de control es necesario realimentar a nuestro controlador con las variables de estado $i^{q}_{ds}$ y $\omega_{m}$, y que este genere una consigna de tensiones de fase congruente con dicha restricción. Para ello en el controlador se implementa una transformación directa de Park para asi poder trabajar con las tensiones $v^{r}_{qd0s}$, ya que, de la planta sensamos $v_{abcs}$, asi generamos nuestras consignas de tensiones $v^{r}_{qd0s}$ y luego mediante una transformación inversa de Park obtenemos las tensiones de fase consignas $v_{abcs}$, capaces de reproducir dicha restricción, con las cuales generamos las consignas para alimentar al modulador de tensión, conmutado con modulación de ancho de pulso PWM. En este análisis el modulador de tensión se idealizado considerando solamente las componentes ideales de las ondas de tensión. Esta técnica se denomina \textbf{linealización por realimentación directa no lineal de estado parcial} y obtenemos asi el modelo \textbf{NL desacoplado con Ley de control NL}.\\
	 En el diagrama de bloques del modelo NL (figura \ref{})  podemos observar en rojo el desacoplamiento que esta restricción impone.\\
	  En la figura \ref{fig:diagrestriccionminima} se puede observar la implementación de esta ley de Control en color rojo dentro del controlador parcial.
	
	\begin{figure}[h!]
	\centering
	\includegraphics[width=\textwidth]{realimentacionNL.png}
	\caption{\label{fig:diagrestriccionminima} Impelementación controlador parcial con restricción mínima (rojo) y con restricción complementaria (naranja). Planta (verde), sensores(rojo), controlador parcial (cleste).}
	\end{figure}
	
	\item\textbf{Dinámica residual en el eje d}
	El modelo de la dinamica residual para para $i^{r}_{ds}$ esta dado por la ec.\ref{eq:2.1.2.e.1} y cuya ecuación de 				transeferencia esta dada por la ec.\ref{eq:2.1.2.e.2}.
	\begin{equation}
	\frac{di^{r}_{ds}}{dt}=\frac{R_{s}}{L_{d}}\ i^{r}_{ds}(t)
	\label{eq:2.1.2.e.1}
	\end{equation}
	\begin{equation}
	\frac{I^{r}_{ds}(s)}{E(s)}=\frac{1}{s+\frac{R_{s}}{L_{d}}}
	\label{eq:2.1.2.e.2}
	\end{equation}
	
	Vemos que la dinámica residual esta dada por una ecuación diferencial monótona descendiente con un cero en $s=-154.55$ si tomamos a $Rs$ constante e igual a 1.02. Por lo que podemos concluir que ante un estado inicial distinto de cero la corriente en el eje d va establecer rápidamente en cero.
	Si incorporamos esta dinámica residual a nuestro modelo LTI obtenemos:
	
	\begin{equation}
	X(t)=\begin{bmatrix}
	\theta_{m}(t)\\
	\omega_{m}(t) 
	\\ 
	i^{r}_{qs}
	\\
	i^{r}_{ds}
	\end{bmatrix}
	\label{eq:2.1.2.e.3}
	\end{equation}
	
	\begin{equation}
	\begin{cases}
	\dot{X}(t)=\begin{bmatrix}
	0 & 1 &0 &0 \\ 
	0 & -\frac{b_{eq}}{J_{eq}} & \frac{3 P_{p} \lambda^{r'}_{m}}{2 J_{eq}} & 0 \\ 
	0  & \frac{- P_{p} \lambda^{r'}_{m}}{ L_{q}} & \frac{-R_{s}}{L_{q}}&0\\
	0&0&0&\frac{R_{s}}{L_{d}}
	\end{bmatrix} X(t) + \begin{bmatrix}
	0 &0 \\ 
	0 &\frac{-1}{J_{eq}} \\ 
	 \frac{1}{L_{q}}&0 \\
	 0&0
	\end{bmatrix} \begin{bmatrix}
	u(t)\\
	d(t) 
	
	\end{bmatrix} \ ; X(t_{0})=x_{0}\\ 
	y(t)=[1 \ \ 0 \ \ 0 \ \ 0 ] \ X(t)
	\end{cases}
	\label{eq:2.1.2.e.4}
	\end{equation}
	

	Donde vemos que ahora nuestro vector de estado (ec.\ref{eq:2.1.2.e.3}) tiene un estado más y las entradas son las definidas por las ec.\ref{eq:2.1.2.c.2} y ec.\ref{eq:2.1.2.c.3}. Como podemos ver ahora $i^{r}_{ds}$ puede ser distinta de cero, sin embargo no se ha considerado el acoplamiento residual Nl con el eje q (ec. \ref{eq:2.1.2.e.4}) y esto se debe a que como comentamos mas arriba la dinámica residual de este eje es monótona descendiente por lo que rápidamente $i^{r}_{ds}$ decae a cero, por lo que, en regimen forzado esta no va a tener influencia sobre el eje d.
	
	En la figura \ref{fig:diagLTI} se puede apreciar el modelo LTI considerando la dinámica residual del eje d (rojo).
	
	\begin{equation}
	v^{r*}_{qs}(t)=L_{d}. i^{r}_{ds}(t).P_{p}.\omega_{m}(t)
	\label{eq:2.1.2.e.5}
	\end{equation}
	
	   \item\textbf{Ley de Control complementaria mínima en el eje q}.
	    Para eliminar completamente este acoplamiento residual NL aún en régimen natural y obtener un modelo equivalente 				completamente lineal, independiente del estado inicial de $i^{r}_{ds}$ se debe realimentar al sistema con la ley de control 			dada por la ec.\ref{eq:2.1.2.e.5}. En la figura \ref{fig:diagrestriccionminima} se puede apreciar el controlador parcial con la implementación de esta restricción en color naranja, obteniendo asi el modelo \textbf{LTI equivalente aumentado} el cual aplica la ley de control mínima en el eje d y la ley de control complementaria en el eje q.\\
	     En el diagrama de bloques del modelo NL (figura \ref{})  podemos observar en naranja el desacoplamiento que esta restricción 		produce.\\
	\end{itemize}
	
	 \item Comparación del modelo dinámico LTI equivalente aumentado vs. el modelo dinámico global LPV forzando $I^{r}_{ds_{0}} \equiv 0$.
	 Si forzamos $I^{r}_{ds_{0}} \equiv 0$, el modelo LPV se caracteriza por la siguiente ecuación:
	 
	 \begin{equation}
		\begin{bmatrix}
	\Delta \dot{\theta}_{m}(t)\\
	\Delta \dot{\omega}_{m}(t)
	\\ 
	\Delta \dot{i^{r}_{qs}}(t)
	\end{bmatrix}
	=
	\begin{bmatrix}
		0 & 1 &0 \\ 
		0 & -\frac{b_{eq}}{J_{eq}} & \frac{3 P_{p} \lambda^{r'}_{m}}{2 J_{eq}} \\ 
		0  & \frac{- P_{p} \lambda^{r'}_{m}}{ L_{q}} & \frac{-R_{s}}{L_{q}}
		\end{bmatrix} 
	\begin{bmatrix}
	\Delta \dot{\theta}_{m}(t)\\
	\Delta \dot{\omega}_{m}(t)
	\\ 
	\Delta \dot{i^{r}_{qs}}(t)
	\end{bmatrix}
	 + \begin{bmatrix}
		0 &0 \\ 
		0 &\frac{-1}{J_{eq}} \\ 
		 \frac{1}{L_{q}}&0 
		\end{bmatrix}
	\begin{bmatrix}
	\Delta T_{leq}(t)\\ 
	\Delta v^{r}_{qs}(t)
	\end{bmatrix}
	\label{eq:2.1.2.f.1}
	\end{equation}
	
	Aplicando esta restricción y considerando $R_{s}$ vemos que las matrices del modelo LPV ahora no varían con el tiempo por lo que tenemos un modelo LTI en las cercanías del punto de operación, además podemos observar que las matrices son iguales a la del \textbf{modelo LTI equivalente aumentado} por lo que podriamos decir que este último es un caso particular  del \textbf{modelo dinámico global LPV} obtenido anteriormente.\\
	Evaluaremos el comportamiento del sistema para distintos puntos de operación $I^{r}_{ds_{0}}$. Por la ecuación del torque electromacnético (ec. \ref{eq: 1}) y recordando que estamos trabajando con una máquina de polos salientes, por lo que $L_{d}$ > $L_{q}$ , se puden debucir tres casos:
	
	\begin{enumerate}
	\item $i^{r}_{ds}(t)=0$:  el flujo concatenado esta afectado únicamente por los imanes permanentes.
	\item $i^{r}_{ds}(t)>0$: reforzamiento del campo principal, se logra un mayor torque a costa de menor velocidad
	\item $i^{r}_{ds}(t)>0$: debilitamiento del campo principal, se logra una mayor velocidad a costa de menor torque
	\end{enumerate}
	Si se considera a la máquina como un sistema de potencia constante rápidamente se puede debucir porque estos cambios en el torque afectan a la velocidad.
	\item Funciones de Transferencia.
	
	 
\end{enumerate}




\subsubsection{Análisis de Estabilidad a lazo abierto para el modelo LTI equivalente aumentado}

\begin{itemize} 
\item \textbf{Polos y ceros del sistema:}

Para el cálculo de los polos y ceros se tomaron $R_{s}=1.02$ y valores nominales de los parámetros de carga.\\
El sistema tiene un único cero dado por la entrada $T_{leq}$

	\begin{equation}
	Lq . s + R_{s}=0; \ s=-\frac{R_{s}}{L_{q}} = -175.86 \frac{rad}{s}
	\label{eq:2.1.2.g.1}
	\end{equation}
	
Los polos del sistema se obtienen mediante el polinomio característica (ec. \ref{eq:2.1.2.g.2} )

	\begin{equation}
	s.[J_{eq}L_{q}s^{2}+(R_{s}J_{eq}+L_{q}b_{eq})s + \frac{3}{2}P_{p}^{2}\lambda ^{r'2}_{m}+R_{s}b_{eq}]
	\label{eq:2.1.2.g.2}
	\end{equation}
	
De donde facilmente se obtiene:\\
$s_{1}=0$\\

Para calcular los otros polos utilizamos un programa de cálculo como Matlab y asi obtenemos:\\
$s_{2}=-89.26 + 301.57 i$\\
$s_{2}=-89.26 - 301.57 i$

Y para calcular la frecuencia natural y el coeficiente de amortiguamiento se obtuvo de la ec. \ref{eq:2.1.2.g.2} la siguiente ecuación :

	\begin{equation}
	s^{2}+\frac{(R_{s}J_{eq}+L_{q}b_{eq})}{J_{eq}L_{q}}s +\frac{\frac{ \frac{3}{2}P_{p}^{2}\lambda ^{r'2}_{m}}{J_{eq}L_{q}}+R_{s}b_{eq}}{J_{eq}L_{q}}
	\label{eq:2.1.2.g.3}
	\end{equation}
	
y se comparó esta con la ec. \ref{eq:2.1.2.g.4} que se encuentra en función de $\xi$ y $\omega_{n}$.
	\begin{equation}
	s^{2}+2\xi \omega_{n} s + \omega_{n}^2 
	\label{eq:2.1.2.g.4}
	\end{equation}

Por lo tanto se deduce que:\\
$\omega_{n}^2 =\frac{\frac{ \frac{3}{2}P_{p}^{2}\lambda ^{r'2}_{m}}{J_{eq}L_{q}}+R_{s}b_{eq}}{J_{eq}L_{q}}$ \ ; $\omega_{n}=314.5 \frac{rad}{s}$\\
$2\xi \omega_{n}=\frac{(R_{s}J_{eq}+L_{q}b_{eq})}{J_{eq}L_{q}}$ \ ; $\xi=0.2838$

Se puede apreciar que estamos en presencia de un sistema subamortiguado  y que el sistema estable ya que todos los polos tienen parte real negativa.\\

En la figura \ref{fig:polos} se puede observa los polos en el plano imaginario.

	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.5\textwidth]{polos.png}
	\caption{\label{fig:polos}  }
	\end{figure}


Es importante aclarar que al cálcular los autovalores a partir de la función de transferencia del sistema no se ha tenido en cuenta el polo de la dinámica residual calculado anteriormente (ec. \ref{eq:2.1.2.e.2}), pero si hubiesemos tomado los autovalores de A (\ref{eq:2.1.2.e.4}) este polo aparecería. 

\item \textbf{Migración de propiedades:}
Se hace necesario evaluar la estabilidad del sistema ante la variación de los parámetros de carga, ya que como sabemos el robot presenta dinámica no lineal acoplada y se considera como aproximación la dinámica de carga `vista' desde el eje de la articualción hombro, ausmiendo variación de sus parámetros equivalentes. En la figura \ref{fig:varpolos} se observa como cambian los polos del sistema cuando se varían estos parámetros dentro de sus límites de incertidumbre.
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.5\textwidth]{varpolos.png}
	\caption{\label{fig:varpolos} Migración de polos con variación de $J_{l}$.}
	\end{figure}
	
	Se puedo observar como el aumento de $J_{l}$ provoca una pequeña disminución de la parte real y una mayor de la parte imaginaria del polo y se puede concluir que si los limites de incertidumbre son correctos el sistema va a permanecer estable. Por otra lado el la figura \ref{varpolosbl} se puede ver la variación de estos con respecto a $b_{l}$ y se puede concluir que la variación de este parámetro dentro de sus límites de incertidumbre prácticamente no afecta al sistema.
	
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.5\textwidth]{varpolosbl.png}
	\caption{\label{fig:varpolosbl} Migración de polos con variación de $b_{l}$.}
	\end{figure}
	

\end{itemize}
\subsubsection{Análisis de Observabilidad completa de estado para el modelo LTI equivalente aumentado}
Se cálculo la observabilidad del modelo LTI (ec .\ref{eq:2.1.2.e.4}) mediante el criterio de Kalman (ec.\ref{eq:2.1.2.k.1}) utilizando para esto Matlab.
	\begin{equation}
	Rango \ de\  O=
	\begin{bmatrix}
	
		C\\ 
		C.A\\ 
		...\\ 
		C.A^{n-1}=n
		\end{bmatrix}
	\label{eq:2.1.2.k.1}
	\end{equation}
	
	Donde:
	
		\begin{equation}
		A=\begin{bmatrix}
	0 & 1 &0 &0 \\ 
	0 & -\frac{b_{eq}}{J_{eq}} & \frac{3 P_{p} \lambda^{r'}_{m}}{2 J_{eq}} & 0 \\ 
	0  & \frac{- P_{p} \lambda^{r'}_{m}}{ L_{q}} & \frac{-R_{s}}{L_{q}}&0\\
	0&0&0&\frac{R_{s}}{L_{d}}
	\end{bmatrix}
	\label{eq:2.1.2.k.2}
	\end{equation}
	\begin{equation}
		C=[1 \ \ 0 \ \ 0 \ \ 0 ] 
	\label{eq:2.1.2.k.3}
	\end{equation}
	
Según el criterio de Kalman para que el sistema de la matriz $O$ tiene que ser igual a la cantidad $n$ de estado. Al calcular la observabilidad desde $\theta_{m}(t)$ en base a la ec.\ref{eq:2.1.2.e.4} obtenemos que el rango de esta matriz es 3, por lo que el sistema no es observable, esto se debe a que $i^{r}_{ds}$ no es un estado observable desde $\theta_{m}(t)$, como se puede apreciar en la ec.\ref{eq:2.1.2.e.4} este estado no posee entradas ni salidas. Otro sería el caso si se calculara la observabilidad a partir de la ec. \ref{eq:2.1.2.c.4} también desde $\theta_{m}(t)$ en donde obtendemos que el sistema es completamente observable.

Otra alternativa es medir la observabilidad desde $\omega_{m}$ en donde obtenemos que esta se degrada aún más, ya que además de $i^{r}_{ds}$, $\theta_{m}(t)$ tampoco es observable desde esta. 

\subsubsection{Análisis de Controlabilidad completa de estado para el modelo LTI equivalente aumentado}
Se procedió a calcular la controlabilidad del modelo LTI ec.\ref{eq:2.1.2.e.4} apartir del criterio de Kalman (ec. \ref{eq:2.1.2.l.1}).

	\begin{equation}
		Rango \ de \ C=[B \ A.B \ ... \ A^{n-1}.B]= n
	\label{eq:2.1.2.l.1}
	\end{equation}
	Donde A esta definida en la ec.\ref{eq:2.1.2.k.3} y B:
	\begin{equation}
		B= \begin{bmatrix}
	0 &0 \\ 
	0 &\frac{-1}{J_{eq}} \\ 
	 \frac{1}{L_{q}}&0 \\
	 0&0
	\end{bmatrix}
	\label{eq:2.1.2.l.2}
	\end{equation}
	
Se concluye que el sistema no es completamente controlable desde la entrada manipulada $v^{r}_{qs}(t)$ ya que el rango de $C$ es 3, esto se debe a que el estado $i^{r}_{ds}$ no es controlable desde $v^{r}_{qs}(t)$, ya que como dijimos anteriormente este un estado aislado del sistema. Para controlador este estado se debería agragar la entrada $v^{r}_{ds}(t)$ volviendo al sistema completamente controlable.

\subsubsection{Simulación dinámica en DT, comparando el modelo NL completo desacoplado con Ley de control
NL vs LTI equivalente aumentado}
\begin{itemize}

\item \textbf{Respuesta del estado interno a pulso de consigna de tensión de estator en eje q, superpuesto con doble pulso de torque de carga.}
A continuación se presentan las respuestas del sistema.
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\textwidth]{iq_LTIvsNL.png}
	\caption{\label{fig:iq_LTIvsNL} $i^{r}_{qs}$ vs $t$.}
	\end{figure}
	
	En la figura \ref{fig:iq_LTIvsNL} se puede observar que la corriente establecida en el eje q es igual para ambos modelos, tanto cuando $i^{r}_{s}(0)=0$ como cuando $i^{r}_{ds}(0)=0.5$ esto se debe a que como puede verse en la figura \ref{fig:ids} decrece rápidamente a cero antes que se establezca la consigna $v^{r}_{qs}$ por lo que al estar la máquina estática esta no tiene efecto alguno sobre el sistema y por lo tanto no se produce acoplamiento de esta sobre el eje q ni tiene efecto sobre el torque, es decir, que esta corriente inicial solamente se va a discipar en el devanado del estator. Es por esto que las demás gráficas solamente se graficaron para el modelo NL, ya que presentan el mismo compartamiento para el modelo LTI para la entrada dada como consigna independientemente de $i^{r}_{ds}(0)$.
		\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\textwidth]{ids.png}
	\caption{\label{fig:ids} $i^{r}_{ds}$vs t.}
	\end{figure}

	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\textwidth]{theta_m.png}
	\caption{\label{fig:theta_m} $\omega_{m}$ vs $t$ y $\theta_{m}$ vs $t$.}
	\end{figure}
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\textwidth]{vd_vq.png}
	\caption{\label{fig:vd_vq} $v^{r}_{ds}$ y $v^{r}_{qs}$.}
	\end{figure}
	\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\textwidth]{temperatura.png}
	\caption{\label{fig:temperatura} Temperatura vs t.}
	\end{figure}

\end{itemize}

\subsection{Diseño, Análisis y Simulación con CONTROLADOR de Movimiento en Cascada con Modulador de Torque equivalente (Control Vectorial)}
\subsubsection{Modulador de Torque equivalente (Controlador interno vectorial de corriente/torque)}
\subsubsection{Controlador externo de movimientos: posición/velocidad }
\subsubsection{IncorporaciónydiseñodeObservadordeEstadodeordenreducidosóloparalapartemecánica de este controlador}
\subsubsection{Simulación en tiempo continuo con modelo completo NL}
\subsubsection{Verificacióndedesempeñoy/omejoras}

\section{Conclusiones}

\section{Referencias}

\end{document}